<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>部门介绍 - 无线电爱好者协会</title>
  <style>
    :root {
      --primary-color: #1a56a7;
      --secondary-color: #0d3b7a;
      --accent-color: #e6f2ff;
      --text-color: #333;
      --light-text: #fff;
      --gray-text: #666;
      --bg-color: #f5f5f5;
      --border-color: #e0e0e0;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Microsoft YaHei', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
    }

    /* 头部样式 */
    .header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      text-align: center;
      padding: 2.5rem 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .logo {
      font-size: 2.8rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      position: relative;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* 徽章样式 */
    .association-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 10;
    }

    .badge-3d {
      width: 120px;
      height: 120px;
      position: relative;
      transform-style: preserve-3d;
      animation: spin 10s linear infinite;
      perspective: 1000px;
      backface-visibility: hidden;
      will-change: transform;
    }

    .badge-front,
    .badge-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
    }

    .badge-image {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .badge-back {
      transform: rotateY(180deg);
    }

    .badge-glow {
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(26, 86, 167, 0.4) 0%, rgba(255, 255, 255, 0) 70%);
    }

    @keyframes spin {
      0% {
        transform: rotateY(0deg);
      }

      100% {
        transform: rotateY(360deg);
      }
    }

    /* 导航样式 */
    .nav {
      background-color: var(--secondary-color);
      padding: 1rem 0;
      display: flex;
      justify-content: center;
      gap: 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: var(--transition);
    }

    .nav a:hover,
    .nav a.active {
      background-color: var(--primary-color);
    }

    .container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .page-title {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 2rem;
      font-size: 2rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid var(--accent-color);
    }

    /* 部门卡片样式 */
    .department-card {
      background-color: white;
      border-radius: 10px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-top: 4px solid var(--primary-color);
      overflow: hidden;
    }

    .department-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }

    .department-card h2 {
      color: var(--primary-color);
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      padding-bottom: 0.8rem;
      border-bottom: 2px solid var(--accent-color);
    }

    /* 媒体区域样式 */
    .department-media {
      margin-bottom: 2rem;
      border-radius: 8px;
      overflow: hidden;
    }

    .image-carousel {
      position: relative;
      width: 100%;
      height: 350px;
      overflow: hidden;
    }

    .carousel-slides {
      display: flex;
      height: 100%;
      transition: transform 0.5s ease;
    }

    .carousel-slide {
      min-width: 100%;
      height: 100%;
    }

    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 0.3s ease;
      opacity: 0;
      cursor: zoom-in;
      /* 显示放大光标 */
    }

    .carousel-slide img.loaded {
      opacity: 1;
    }

    .carousel-prev,
    .carousel-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-prev {
      left: 10px;
    }

    .carousel-next {
      right: 10px;
    }

    .carousel-prev:hover,
    .carousel-next:hover {
      background-color: rgba(0, 0, 0, 0.7);
    }

    .carousel-indicators {
      position: absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .carousel-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .carousel-indicator.active {
      background-color: white;
    }

    /* 统计数据样式 */
    .department-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
      padding: 1.5rem;
      background-color: var(--accent-color);
      border-radius: 8px;
    }

    .stat-item {
      text-align: center;
      padding: 0.8rem;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 0.3rem;
    }

    .stat-label {
      font-size: 0.95rem;
      color: var(--gray-text);
    }

    /* 特色标签样式 */
    .feature-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin-top: 1.5rem;
      padding: 0.5rem 0;
    }

    .feature-tag {
      background-color: var(--accent-color);
      color: var(--primary-color);
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.95rem;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .feature-tag:hover {
      background-color: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    /* 部门简介横向布局 */
    .department-intro {
      background-color: #f9f9f9;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      border-left: 3px solid var(--primary-color);
    }

    .department-intro h3 {
      color: var(--secondary-color);
      margin-top: 0;
      margin-bottom: 0.8rem;
      font-size: 1.3rem;
    }

    /* 其他详情内容布局 */
    .department-details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .department-section {
      background-color: #f9f9f9;
      padding: 1.2rem;
      border-radius: 8px;
      transition: transform 0.2s ease;
      border-left: 3px solid var(--primary-color);
    }

    .department-section:hover {
      transform: translateY(-3px);
    }

    .department-section h3 {
      color: var(--secondary-color);
      margin-top: 0;
      margin-bottom: 0.8rem;
      font-size: 1.2rem;
    }

    .department-section ul {
      padding-left: 1.5rem;
      margin: 0;
    }

    .department-section li {
      margin-bottom: 0.5rem;
    }

    .footer {
      background-color: #1a56a7;
      color: white;
      text-align: center;
      padding: 2rem 0;
      margin-top: 4rem;
      position: relative;
      overflow: hidden;
    }

    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .footer p {
      position: relative;
      margin: 0;
      opacity: 0.9;
    }

    /* 回到顶部按钮样式 */
    #scrollTopBtn {
      opacity: 0;
      visibility: hidden;
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 3.2rem;
      height: 3.2rem;
      border-radius: 50%;
      background-color: var(--primary-color);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      z-index: 99;
    }

    #scrollTopBtn.show {
      opacity: 1;
      visibility: visible;
    }

    #scrollTopBtn:hover {
      background-color: var(--secondary-color);
      transform: translateY(-3px);
    }

    /* 图片查看器样式 */
    .image-viewer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .image-viewer.show {
      opacity: 1;
      visibility: visible;
    }

    .viewer-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }

    .viewer-image {
      max-width: 100%;
      max-height: 80vh;
      object-fit: contain;
    }

    .viewer-close {
      position: absolute;
      top: -40px;
      right: 0;
      color: white;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
    }

    /* 响应式调整 */
    @media (max-width: 768px) {
      .badge-3d {
        width: 80px;
        height: 80px;
      }

      .logo {
        font-size: 2rem;
      }

      .nav {
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.5rem;
      }

      .image-carousel {
        height: 250px;
      }

      .department-stats {
        grid-template-columns: 1fr;
      }

      .stat-value {
        font-size: 1.6rem;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <div class="header">
    <div class="header-content">
      <div class="logo">无线电爱好者协会</div>
      <div>挖掘潜质，就在无协</div>
    </div>

    <!-- 3D徽章 -->
    <div class="association-badge">
      <div class="badge-3d">
        <div class="badge-front">
          <img src="./image/白底会徽.png" alt="协会徽章" class="badge-image">
        </div>
        <div class="badge-back">
          <img src="./image/白底会徽.png" alt="协会徽章背面" class="badge-image">
        </div>
      </div>
      <div class="badge-glow"></div>
    </div>
  </div>

  <div class="nav">
    <a href="index.html">首页</a>
    <a href="departments.html" class="active">部门介绍</a>
    <a href="activities.html">协会活动</a>
    <a href="honors.html">荣誉成就</a>
    <a href="trainings.html">培训教学</a>
    <a href="registration.html">招新报名</a>
  </div>

  <div class="container">
    <h1 class="page-title">部门介绍</h1>

    <div id="departments-container">
      <!-- 部门卡片将通过JavaScript动态生成 -->
    </div>
  </div>

  <div class="footer">
    <p>© 2025 燕山大学无线电爱好者协会 | 联系我们: 郭思源:15371530788</p>
  </div>

  <!-- 回到顶部按钮 -->
  <button id="scrollTopBtn" title="回到顶部">↑</button>

  <!-- 图片查看器模态框 -->
  <div class="image-viewer" id="imageViewer">
    <div class="viewer-content">
      <button class="viewer-close" id="viewerClose">&times;</button>
      <img src="" alt="放大查看" class="viewer-image" id="viewerImage">
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // 存储所有图片信息
      let allImages = [];

      fetchDepartments();

      // 设置当前导航项为active
      document.querySelectorAll('.nav a').forEach(link => {
        if (link.href === window.location.href) {
          link.classList.add('active');
        }
      });

      // 回到顶部功能
      const scrollTopBtn = document.getElementById('scrollTopBtn');
      scrollTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });

      window.addEventListener('scroll', function () {
        if (window.scrollY > 300) {
          scrollTopBtn.classList.add('show');
        } else {
          scrollTopBtn.classList.remove('show');
        }
      });

      // 图片查看器功能
      const imageViewer = document.getElementById('imageViewer');
      const viewerImage = document.getElementById('viewerImage');
      const viewerClose = document.getElementById('viewerClose');

      // 关闭查看器
      viewerClose.addEventListener('click', () => {
        imageViewer.classList.remove('show');
        document.body.style.overflow = ''; // 恢复滚动
      });

      // 点击查看器背景关闭
      imageViewer.addEventListener('click', (e) => {
        if (e.target === imageViewer) {
          imageViewer.classList.remove('show');
          document.body.style.overflow = ''; // 恢复滚动
        }
      });

      // 键盘导航 - 只保留ESC关闭功能
      document.addEventListener('keydown', (e) => {
        if (!imageViewer.classList.contains('show')) return;

        if (e.key === 'Escape') {
          imageViewer.classList.remove('show');
          document.body.style.overflow = '';
        }
      });

      // 打开图片查看器
      function openImageViewer(src) {
        viewerImage.src = src;
        imageViewer.classList.add('show');
        document.body.style.overflow = 'hidden'; // 防止背景滚动
      }

      // 暴露给外部使用的函数
      window.openImageViewer = openImageViewer;
    });

    function fetchDepartments() {
      // 部门数据
      const departments = [
        {
          name: "组织部",
          description: "组织部是协会的核心协调部门，负责统筹各项活动的策划与执行，是连接各部门的重要纽带。无论是大型竞赛还是日常活动，组织部都在其中发挥着关键的组织协调作用。作为协会的中枢部门，组织部不仅要确保各项活动顺利开展，还要促进各部门之间的有效沟通与协作，是协会高效运转的重要保障。",
          responsibilities: [
            "策划和组织协会各类活动，包括技术沙龙、竞赛准备、招新活动等",
            "协调各部门之间的工作，确保活动顺利开展",
            "负责协会成员的管理、考勤和档案维护",
            "制定协会规章制度和活动流程",
            "对接学校相关部门，争取资源支持",
            "组织协会内部的交流活动，增强团队凝聚力"
          ],
          features: [
            "锻炼组织协调能力和沟通能力的最佳平台",
            "学习活动策划与执行的全流程管理",
            "与协会所有成员保持密切互动，人脉广泛",
            "有机会成为协会活动的总负责人，提升领导力",
            "掌握项目管理的核心技能，为未来职业发展奠定基础"
          ],
          learn: [
            "公众号运营与新媒体推广技巧",
            "活动策划书与项目计划书撰写",
            "视频剪辑与图片处理（Photoshop、Premiere）",
            "团队管理与协调技巧",
            "文案写作与宣传技巧",
            "会议组织与主持能力"
          ],
          stats: {
            members: 28,
            activities: 42,
            years: 8
          },
          tags: ["统筹协调", "活动策划", "团队管理", "新媒体运营"],
          images: [
            "./image/organization1.jpg",
            "./image/organization2.jpg"
          ]
        },
        {
          name: "嵌入式部",
          description: "嵌入式部专注于嵌入式系统开发与应用，是协会的核心技术部门之一，致力于培养成员的软硬件结合能力。部门配备了多种主流开发板和实验设备，为成员提供良好的实践环境。嵌入式技术是当今智能硬件发展的核心，部门成员有机会参与实际项目开发，将理论知识转化为实际应用。",
          responsibilities: [
            "开展嵌入式技术相关的培训和教学",
            "参与各类电子竞赛的技术准备工作",
            "开发基于嵌入式系统的创新项目",
            "维护协会的电子设备和实验平台",
            "为其他部门提供技术支持",
            "编写技术文档和教程，传承技术经验"
          ],
          features: [
            "理论与实践紧密结合的技术部门",
            "参与实际项目开发，积累实战经验",
            "有机会参加国家级电子竞赛并获得奖项",
            "软硬件兼修，全面发展技术能力",
            "部门内部定期举办技术分享会，共同进步"
          ],
          learn: [
            "STM32、Arduino、ESP32等主流开发平台",
            "C/C++嵌入式编程与调试技巧",
            "传感器应用与数据采集技术",
            "嵌入式操作系统（FreeRTOS、uC/OS）原理",
            "PCB设计与制作（Altium Designer、KiCad）",
            "物联网（IoT）技术与应用开发"
          ],
          stats: {
            members: 35,
            projects: 26,
            awards: 18
          },
          tags: ["STM32", "Arduino", "硬件开发", "竞赛强队"],
          images: [
            "./image/embedded1.jpg",
            "./image/embedded2.jpg",
            "./image/embedded3.jpg",
            "./image/embedded4.jpg"
          ]
        },
        {
          name: "机械部",
          description: "机械部专注于机械设计与制造，为协会的各类项目提供结构设计支持，是技术实现的重要保障。部门拥有3D打印机等先进设备，能够将设计理念快速转化为实物模型。机械设计是产品实现的基础，部门成员通过实践掌握从概念设计到原型制作的全过程，培养扎实的工程实践能力。",
          responsibilities: [
            "负责各类竞赛和项目的机械结构设计",
            "开展机械设计软件的教学与培训",
            "进行3D建模与打印工作",
            "参与机械零件的加工与装配",
            "与嵌入式部合作完成整体项目",
            "优化现有结构设计，提高性能和可靠性"
          ],
          features: [
            "注重空间想象能力和动手能力的培养",
            "拥有3D打印等先进设备，实践机会丰富",
            "设计成果可直接转化为实物，成就感强",
            "与其他技术部门紧密协作，共同完成复杂项目",
            "参与从设计到制造的全流程，经验全面"
          ],
          learn: [
            "SolidWorks、AutoCAD等专业设计软件",
            "机械制图与工程绘图规范",
            "3D建模与打印技术及参数优化",
            "机械结构设计原理与材料选择",
            "材料力学与结构强度分析",
            "产品原型制作与测试方法"
          ],
          stats: {
            members: 22,
            models: 53,
            printers: 3
          },
          tags: ["3D打印", "SolidWorks", "结构设计", "动手实践"],
          images: [
            "./image/mechanical1.jpg",
            "./image/mechanical2.jpg",
            "./image/mechanical3.jpg",
            "./image/mechanical4.jpg"
          ]
        },
        {
          name: "计算机部",
          description: "计算机部专注于软件与算法开发，为协会提供软件开发和信息技术支持，推动智能化技术应用。部门成员参与从算法设计到应用开发的全流程工作，技术覆盖面广。在数字化时代，计算机技术是各类创新项目的核心驱动力，部门成员有机会接触前沿技术并将其应用于实际项目中。",
          responsibilities: [
            "开发各类应用程序和控制系统",
            "研究和实现智能算法",
            "维护协会网站和信息系统",
            "开展计算机相关技术培训",
            "为其他部门提供软件开发支持",
            "探索新技术在协会项目中的应用"
          ],
          features: [
            "技术覆盖面广，学习内容丰富多样",
            "注重编程能力和算法思维培养",
            "有机会参与开源项目，积累实战经验",
            "与前沿技术接轨，学习最新开发框架",
            "开发成果直接应用于协会各类活动"
          ],
          learn: [
            "Python、C++、JavaScript等多编程语言",
            "Web开发（前端/后端）与数据库应用",
            "Linux操作系统应用与Shell编程",
            "人工智能与机器学习基础算法",
            "物理引擎与仿真技术应用",
            "移动应用开发与界面设计",
            "acm算法竞赛"
          ],
          stats: {
            members: 30,
            softwares: 19,
            websites: 2
          },
          tags: ["编程开发", "算法研究", "Web技术", "AI应用"],
          images: [
            "./image/computer1.jpg",
            "./image/computer2.jpg"
          ]
        },
        {
          name: "团支部",
          description: "团支部是协会的思想引领核心，负责协会的思想政治工作和团员管理，促进协会健康发展。同时也承担着协会文化建设和对外宣传的重要职责。团支部不仅是连接协会与学校团委的桥梁，也是营造协会良好文化氛围、增强成员凝聚力的重要力量。",
          responsibilities: [
            "组织开展主题团日活动和政治学习",
            "负责团员的发展、教育和管理工作",
            "组织召开团代会和组织生活会",
            "推动协会文化建设和精神文明建设",
            "配合学校团委完成相关工作",
            "宣传协会活动和成果，提升协会影响力"
          ],
          features: [
            "锻炼组织领导和思想引领能力",
            "参与协会重大决策讨论，发挥核心作用",
            "培养团队协作和沟通能力",
            "有机会获得优秀团员等荣誉称号",
            "与学校各级团组织保持密切联系"
          ],
          learn: [
            "团组织工作方法与技巧",
            "思想政治教育理论与实践",
            "公文写作与会议组织规范",
            "团队管理与激励机制",
            "活动策划与执行流程",
            "新闻写作与宣传报道技巧"
          ],
          stats: {
            members: 33,
            events: 35,
            honors: 9
          },
          tags: ["思想引领", "组织建设", "文化宣传", "志愿服务"],
          images: [
            "./image/league1.jpg",
            "./image/league2.jpg"
          ]
        }
      ];

      // 收集所有图片路径
      let allImages = [];
      departments.forEach(dept => {
        dept.images.forEach(img => {
          allImages.push(img);
        });
      });
      // 存储到全局变量
      window.allImages = allImages;

      let html = '';
      departments.forEach((dept, index) => {
        // 生成职责列表HTML
        let responsibilitiesHtml = dept.responsibilities.map(item => `<li>${item}</li>`).join('');
        // 生成特色列表HTML
        let featuresHtml = dept.features.map(item => `<li>${item}</li>`).join('');
        // 生成学习内容列表HTML
        let learnHtml = dept.learn.map(item => `<li>${item}</li>`).join('');

        // 生成轮播图片HTML
        let slidesHtml = '';
        let indicatorsHtml = '';
        dept.images.forEach((img, i) => {
          slidesHtml += `
            <div class="carousel-slide">
              <img src="${img}" alt="${dept.name}活动图片 ${i + 1}" class="department-img"
                   onerror="this.src='./image/department-default.jpg'"
                   onclick="openImageViewer('${img}')">
            </div>
          `;
          indicatorsHtml += `<button class="carousel-indicator ${i === 0 ? 'active' : ''}" data-index="${i}"></button>`;
        });

        // 生成统计数据HTML
        const statsHtml = `
          <div class="department-stats">
            <div class="stat-item">
              <div class="stat-value">${dept.stats.members}</div>
              <div class="stat-label">部门成员</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${dept.stats.activities || dept.stats.projects || dept.stats.models || dept.stats.softwares || dept.stats.events}</div>
              <div class="stat-label">
                ${dept.stats.activities ? '活动场次' :
            dept.stats.projects ? '完成项目' :
              dept.stats.models ? '3D模型' :
                dept.stats.softwares ? '开发软件' : '主题活动'}
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${dept.stats.years || dept.stats.awards || dept.stats.printers || dept.stats.websites || dept.stats.honors}</div>
              <div class="stat-label">
                ${dept.stats.years ? '成立年限' :
            dept.stats.awards ? '竞赛奖项' :
              dept.stats.printers ? '3D打印机' :
                dept.stats.websites ? '搭建网站' : '获得荣誉'}
              </div>
            </div>
          </div>
        `;

        // 生成特色标签HTML
        let tagsHtml = '<div class="feature-tags">';
        dept.tags.forEach(tag => {
          tagsHtml += `<span class="feature-tag">${tag}</span>`;
        });
        tagsHtml += '</div>';

        // 部门卡片完整HTML - 部门简介横向布局
        html += `
          <div class="department-card">
            <h2>${dept.name}</h2>
            
            <!-- 媒体区域：图片轮播 + 统计数据 + 标签 -->
            <div class="department-media">
              <div class="image-carousel" data-dept="${index}">
                <div class="carousel-slides">
                  ${slidesHtml}
                </div>
                <button class="carousel-prev"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-next"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-indicators">${indicatorsHtml}</div>
              </div>
              
              ${statsHtml}
              ${tagsHtml}
            </div>
            
            <!-- 部门简介横向展示 -->
            <div class="department-intro">
              <h3>部门简介</h3>
              <p>${dept.description}</p>
            </div>
            
            <!-- 其他详情内容网格布局 -->
            <div class="department-details-grid">
              <div class="department-section">
                <h3>主要职责</h3>
                <ul>${responsibilitiesHtml}</ul>
              </div>
              
              <div class="department-section">
                <h3>部门特色</h3>
                <ul>${featuresHtml}</ul>
              </div>
              
              <div class="department-section">
                <h3>学习内容</h3>
                <ul>${learnHtml}</ul>
              </div>
            </div>
          </div>
        `;
      });

      document.getElementById('departments-container').innerHTML = html;

      // 初始化轮播功能
      initCarousels();

      // 处理图片加载完成事件
      document.querySelectorAll('.department-img').forEach(img => {
        img.onload = () => img.classList.add('loaded');
        // 如果图片已缓存，手动触发onload
        if (img.complete) img.onload();
      });
    }

    // 轮播功能初始化函数
    function initCarousels() {
      const carousels = document.querySelectorAll('.image-carousel');

      carousels.forEach(carousel => {
        const slidesContainer = carousel.querySelector('.carousel-slides');
        const slides = carousel.querySelectorAll('.carousel-slide');
        const prevBtn = carousel.querySelector('.carousel-prev');
        const nextBtn = carousel.querySelector('.carousel-next');
        const indicators = carousel.querySelectorAll('.carousel-indicator');
        let currentIndex = 0;
        const slideCount = slides.length;

        // 更新轮播显示
        function updateCarousel() {
          slidesContainer.style.transform = `translateX(-${currentIndex * 100}%)`;

          // 更新指示器状态
          indicators.forEach((indicator, index) => {
            if (index === currentIndex) {
              indicator.classList.add('active');
            } else {
              indicator.classList.remove('active');
            }
          });
        }

        // 下一张
        function nextSlide() {
          currentIndex = (currentIndex + 1) % slideCount;
          updateCarousel();
        }

        // 上一张
        function prevSlide() {
          currentIndex = (currentIndex - 1 + slideCount) % slideCount;
          updateCarousel();
        }

        // 事件监听
        nextBtn.addEventListener('click', nextSlide);
        prevBtn.addEventListener('click', prevSlide);

        // 指示器点击事件
        indicators.forEach((indicator, index) => {
          indicator.addEventListener('click', () => {
            currentIndex = index;
            updateCarousel();
          });
        });

        // 自动轮播
        let autoplayInterval = setInterval(nextSlide, 5000);

        // 鼠标悬停时暂停自动轮播
        carousel.addEventListener('mouseenter', () => {
          clearInterval(autoplayInterval);
        });

        // 鼠标离开时恢复自动轮播
        carousel.addEventListener('mouseleave', () => {
          autoplayInterval = setInterval(nextSlide, 5000);
        });
      });
    }
  </script>
</body>

</html>